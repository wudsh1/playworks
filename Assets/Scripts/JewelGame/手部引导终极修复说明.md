# æ‰‹éƒ¨å¼•å¯¼ - ç»ˆæä¿®å¤è¯´æ˜

## ğŸ¯ æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### âŒ ä¹‹å‰çš„é—®é¢˜

**æ‰‹éƒ¨å¼•å¯¼å’Œæ–¹å—ä¸åœ¨åŒä¸€ä¸ªçˆ¶ç‰©ä½“ä¸‹**

```
Canvas
â”œâ”€â”€ SomeParent
â”‚   â””â”€â”€ HandGuide âŒ çˆ¶ç‰©ä½“ä¸åŒ
â””â”€â”€ BoardContainer
    â”œâ”€â”€ Block1
    â”œâ”€â”€ Block2
    â””â”€â”€ ...
```

**ç»“æœ**ï¼šå³ä½¿ä½¿ç”¨ç›¸åŒå…¬å¼è®¡ç®— `anchoredPosition`ï¼Œç”±äºçˆ¶ç‰©ä½“ä¸åŒï¼Œå®é™…æ˜¾ç¤ºä½ç½®ä¹Ÿä¸åŒï¼

---

### âœ… ç°åœ¨çš„è§£å†³æ–¹æ¡ˆ

**å°†æ‰‹éƒ¨å¼•å¯¼ç›´æ¥æ”¾åˆ°æ¸¸æˆæ¿å®¹å™¨å†…**

```
Canvas
â””â”€â”€ BoardContainer
    â”œâ”€â”€ Block1
    â”œâ”€â”€ Block2
    â”œâ”€â”€ ...
    â””â”€â”€ HandGuide âœ… ä¸æ–¹å—åŒçº§ï¼
```

**ç»“æœ**ï¼šæ‰‹éƒ¨å’Œæ–¹å—ä½¿ç”¨**å®Œå…¨ç›¸åŒçš„åæ ‡ç³»ç»Ÿ**ï¼Œä½ç½®100%å‡†ç¡®ï¼

---

## ğŸ”§ è‡ªåŠ¨ä¿®å¤æœºåˆ¶

### ä»£ç å®ç°

```csharp
// åˆå§‹åŒ–æ—¶è‡ªåŠ¨è°ƒæ•´
if (AutoAdjustParent && HandRectTransform != null)
{
    // å°†æ‰‹éƒ¨å¼•å¯¼ç§»åŠ¨åˆ°æ¸¸æˆæ¿å®¹å™¨å†…éƒ¨ï¼ˆä¸æ–¹å—åŒçº§ï¼‰
    if (HandRectTransform.parent != _boardContainerRect)
    {
        HandRectTransform.SetParent(_boardContainerRect, false);
        Debug.Log("âœ… çˆ¶ç‰©ä½“å·²è°ƒæ•´ï¼Œç°åœ¨æ‰‹éƒ¨å’Œæ–¹å—åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸‹");
    }
    
    // è®¾ç½®é”šç‚¹ä¸ºä¸­å¿ƒï¼ˆä¸æ–¹å—ä¸€è‡´ï¼‰
    HandRectTransform.anchorMin = new Vector2(0.5f, 0.5f);
    HandRectTransform.anchorMax = new Vector2(0.5f, 0.5f);
    HandRectTransform.pivot = new Vector2(0.5f, 0.5f);
}
```

### ä½ç½®è®¡ç®—

```csharp
// ğŸ¯ ä¸ JewelBlockController.UpdatePosition() å®Œå…¨ç›¸åŒçš„å…¬å¼
float targetX = (cellWidth * GuideStartColumn) + (cellWidth / 2f) - (boardWidth / 2f);
float targetY = bottomOffsetY + (cellHeight * GuideRow) + (cellHeight / 2f);

HandRectTransform.anchoredPosition = new Vector2(targetX, targetY);
```

**å®Œå…¨ç›¸åŒçš„å…¬å¼ + å®Œå…¨ç›¸åŒçš„çˆ¶ç‰©ä½“ = å®Œå…¨ç›¸åŒçš„ä½ç½®ï¼**

---

## âš™ï¸ Inspector é…ç½®

### å¿…é¡»å¼€å¯

```
JewelHandGuide ç»„ä»¶ï¼š

âœ… Auto Adjust Parent: true  â† å¿…é¡»å¼€å¯ï¼
âœ… Show Debug Info: true     â† ç”¨äºæŸ¥çœ‹è°ƒè¯•ä¿¡æ¯

Guide Row: 3                 â† ç¬¬4è¡Œ
Guide Start Column: 3        â† ç¬¬4åˆ—
Guide End Column: 3 æˆ– 4     â† å•æ ¼æˆ–ç§»åŠ¨
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### Step 1: ç¡®è®¤è‡ªåŠ¨è°ƒæ•´å¼€å¯

```
Auto Adjust Parent: true
```

### Step 2: è¿è¡Œæ¸¸æˆ

### Step 3: æŸ¥çœ‹æ—¥å¿—

åº”è¯¥çœ‹åˆ°ï¼š

```
[JewelHandGuide] å°†æ‰‹éƒ¨å¼•å¯¼ç§»åŠ¨åˆ°æ¸¸æˆæ¿å®¹å™¨å†…: BoardContainer
   åŸçˆ¶ç‰©ä½“: XXX â†’ æ–°çˆ¶ç‰©ä½“: BoardContainer
[JewelHandGuide] âœ… çˆ¶ç‰©ä½“å·²è°ƒæ•´ï¼Œç°åœ¨æ‰‹éƒ¨å’Œæ–¹å—åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸‹
[JewelHandGuide] é”šç‚¹å·²è®¾ç½®ä¸ºä¸­å¿ƒ (0.5, 0.5)
```

### Step 4: æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯

å³é”® JewelHandGuide â†’ `æ‰“å°è°ƒè¯•ä¿¡æ¯`

æŸ¥çœ‹ï¼š
```
çˆ¶ç‰©ä½“æ£€æŸ¥:
  - æ‰‹éƒ¨çˆ¶ç‰©ä½“: BoardContainer
  - æ¸¸æˆæ¿å®¹å™¨: BoardContainer
  - æ‰‹éƒ¨æ˜¯å®¹å™¨çš„å­ç‰©ä½“: True âœ…
```

### Step 5: æŸ¥çœ‹ Scene è§†å›¾

- ğŸŸ¡ **é»„è‰²çƒ**ï¼ˆæ‰‹éƒ¨ï¼‰
- ğŸŸ¢ **ç»¿è‰²æ¡†**ï¼ˆç›®æ ‡ä½ç½®ï¼‰

**åº”è¯¥å®Œå…¨é‡å æˆ–éå¸¸æ¥è¿‘ï¼**

---

## ğŸ“Š æ—¥å¿—ç¤ºä¾‹

### âœ… æ­£ç¡®çš„æ—¥å¿—

```
[JewelHandGuide] å°†æ‰‹éƒ¨å¼•å¯¼ç§»åŠ¨åˆ°æ¸¸æˆæ¿å®¹å™¨å†…: BoardContainer
[JewelHandGuide] âœ… çˆ¶ç‰©ä½“å·²è°ƒæ•´
[JewelHandGuide] é”šç‚¹å·²è®¾ç½®ä¸ºä¸­å¿ƒ (0.5, 0.5)

[JewelHandGuide] è®¡ç®—ä½ç½®ï¼ˆä¸æ–¹å—å…¬å¼ä¸€è‡´ï¼‰:
   ç›®æ ‡åæ ‡(X=3, Y=3) â†’ ç¬¬4åˆ—, ç¬¬4è¡Œ
   è®¡ç®—ä½ç½®: (-143.8, -521.5)
   å…¬å¼: X = 3*57.5 + 28.75 - 345 = -143.8
   å…¬å¼: Y = -722.8 + 3*57.5 + 28.75 = -521.5

çˆ¶ç‰©ä½“æ£€æŸ¥:
  - æ‰‹éƒ¨çˆ¶ç‰©ä½“: BoardContainer
  - æ¸¸æˆæ¿å®¹å™¨: BoardContainer
  - æ‰‹éƒ¨æ˜¯å®¹å™¨çš„å­ç‰©ä½“: True âœ…
```

---

## ğŸ¨ ä¸ºä»€ä¹ˆè¿™æ¬¡èƒ½è§£å†³ï¼Ÿ

### åæ ‡ç³»ç»Ÿç»Ÿä¸€

**ä¹‹å‰**ï¼š
```
HandGuide.parent = Canvas
  anchoredPosition = (-115, -521)
  â†’ ç›¸å¯¹äº Canvas çš„ä¸­å¿ƒ

Block.parent = BoardContainer
  anchoredPosition = (-143, -521)
  â†’ ç›¸å¯¹äº BoardContainer çš„ä¸­å¿ƒ

å³ä½¿å…¬å¼ç›¸åŒï¼Œå› ä¸ºå‚è€ƒç‚¹ä¸åŒï¼Œæ˜¾ç¤ºä½ç½®ä¹Ÿä¸åŒï¼
```

**ç°åœ¨**ï¼š
```
HandGuide.parent = BoardContainer âœ…
  anchoredPosition = (-143, -521)
  â†’ ç›¸å¯¹äº BoardContainer çš„ä¸­å¿ƒ

Block.parent = BoardContainer âœ…
  anchoredPosition = (-143, -521)
  â†’ ç›¸å¯¹äº BoardContainer çš„ä¸­å¿ƒ

ç›¸åŒçš„çˆ¶ç‰©ä½“ + ç›¸åŒçš„åæ ‡ = å®Œå…¨ä¸€è‡´ï¼
```

---

## âš ï¸ é‡è¦æ£€æŸ¥

### è¿è¡Œæ¸¸æˆåå¿…é¡»çœ‹åˆ°

```
âœ… çˆ¶ç‰©ä½“å·²è°ƒæ•´ï¼Œç°åœ¨æ‰‹éƒ¨å’Œæ–¹å—åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸‹
```

**å¦‚æœæ²¡çœ‹åˆ°è¿™ä¸ªæ—¥å¿—**ï¼š
- æ£€æŸ¥ `Auto Adjust Parent` æ˜¯å¦å‹¾é€‰
- æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—

### åœ¨è°ƒè¯•ä¿¡æ¯ä¸­å¿…é¡»çœ‹åˆ°

```
æ‰‹éƒ¨æ˜¯å®¹å™¨çš„å­ç‰©ä½“: True âœ…
```

**å¦‚æœæ˜¾ç¤º False**ï¼š
- è‡ªåŠ¨è°ƒæ•´å¤±è´¥
- éœ€è¦æ‰‹åŠ¨è°ƒæ•´å±‚çº§

---

## ğŸ® æ‰‹åŠ¨éªŒè¯æ–¹æ³•

### åœ¨ Hierarchy ä¸­æ£€æŸ¥

è¿è¡Œæ¸¸æˆåï¼Œåœ¨ Hierarchy çª—å£ä¸­æŸ¥çœ‹ï¼š

```
Canvas
â””â”€â”€ BoardContainer
    â”œâ”€â”€ Block (Clone)
    â”œâ”€â”€ Block (Clone)
    â”œâ”€â”€ ...
    â””â”€â”€ æ‰‹éƒ¨å¼•å¯¼å¯¹è±¡ âœ… åº”è¯¥åœ¨è¿™é‡Œï¼
```

**å¦‚æœä¸åœ¨**ï¼šåœæ­¢æ¸¸æˆï¼Œæ‰‹åŠ¨æ‹–åŠ¨åˆ° BoardContainer ä¸‹

---

## ğŸš€ ç°åœ¨è¯·åš

### 1. ç¡®è®¤é…ç½®

```
Auto Adjust Parent: âœ… true
```

### 2. é‡æ–°è¿è¡Œæ¸¸æˆ

### 3. æŸ¥çœ‹æ—¥å¿—

å¿…é¡»çœ‹åˆ°ï¼š
```
[JewelHandGuide] âœ… çˆ¶ç‰©ä½“å·²è°ƒæ•´
```

### 4. æ£€æŸ¥ Hierarchy

æ‰‹éƒ¨å¼•å¯¼åº”è¯¥åœ¨ `BoardContainer` å†…

### 5. æŸ¥çœ‹ Scene è§†å›¾

é»„è‰²çƒå’Œç»¿è‰²æ¡†åº”è¯¥é‡å 

---

## ğŸ’¡ å¦‚æœè¿˜æ˜¯ä¸å¯¹

è¯·æä¾›ï¼š

1. **å®Œæ•´çš„åˆå§‹åŒ–æ—¥å¿—**ï¼ˆåŒ…å«çˆ¶ç‰©ä½“è°ƒæ•´çš„æ—¥å¿—ï¼‰
2. **Hierarchy çª—å£æˆªå›¾**ï¼ˆæ˜¾ç¤ºæ‰‹éƒ¨å¼•å¯¼çš„ä½ç½®ï¼‰
3. **Scene è§†å›¾æˆªå›¾**ï¼ˆæ˜¾ç¤º Gizmosï¼‰

è¿™æ ·æˆ‘å°±èƒ½ç²¾ç¡®å®šä½é—®é¢˜äº†ï¼ğŸ¯













