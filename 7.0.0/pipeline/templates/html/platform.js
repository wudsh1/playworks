const _0x1881f7=_0x22da;function _0x4ee5(){const _0x4242bd=['pre','477ptvCcg','meta','32936nPbMJr','generatePackageConfig','935004ipgICy','<head>','resolve','getBrotliLibrary','620xBjECO','replace','inject','bundleResources','stringify','templatePath','readdir','readFile','split','renderFile','escapeHTMLForTrampoline','storeMeta','jsons','.js','generateHTML',';base64,','5064VoULrN','pipeline','inlineSounds','buildTemplate','inlineVideos','bundle','resources','getInjectionChunks','exists','targetFolder','base64','font/','images','sourceFolder','match','inlineBlobs','startsWith','forceUncompressed','endsWith','data:','libraries.js','mkdir','image/','1844280vCpqOG','getAssetsStatistic','paths','blobs','combineLibraries','join','inlineImages','\x20src=\x22','copy','pi.js','exports','\x20src=\x22assets/','trampolinePath','index.html','index.pug','audio/','toString','existsSync','slice','inlineJsons','writeFile','map','inlineScripts','storeHTML','config','urljoin','getImages','indexOf','injectTrampoline','getVideos','</script>','combineScripts','1524708OecvYG','2hWGKHy','videos','luna','getSounds','trampoline.pug','14mQykFm','index','Abstract\x20platform\x20is\x20not\x20aware\x20of\x20injection\x20chunks!','<style>','compress','511948cJDOOA','package','version','combineJsons','1157299VOFCRo','unity','assembleMeta','pug','assets','.meta.json','useBase122','readFileSync','BASE_URL','filter','env','engine','api'];_0x4ee5=function(){return _0x4242bd;};return _0x4ee5();}(function(_0x54b8e7,_0x2d0a67){const _0x343d5a=_0x22da,_0x58547b=_0x54b8e7();while(!![]){try{const _0x22b757=parseInt(_0x343d5a(0x209))/0x1+-parseInt(_0x343d5a(0x1ff))/0x2*(parseInt(_0x343d5a(0x1fe))/0x3)+-parseInt(_0x343d5a(0x233))/0x4*(-parseInt(_0x343d5a(0x223))/0x5)+parseInt(_0x343d5a(0x21f))/0x6*(parseInt(_0x343d5a(0x204))/0x7)+-parseInt(_0x343d5a(0x21d))/0x8*(parseInt(_0x343d5a(0x21b))/0x9)+parseInt(_0x343d5a(0x1de))/0xa+-parseInt(_0x343d5a(0x20d))/0xb;if(_0x22b757===_0x2d0a67)break;else _0x58547b['push'](_0x58547b['shift']());}catch(_0x3545ea){_0x58547b['push'](_0x58547b['shift']());}}}(_0x4ee5,0x51646));const HTML_TAG_REGEX=/<html[^>]*>/i,HEAD_OPENING_TAG_STRING=_0x1881f7(0x220),HEAD_CLOSING_TAG_STRING='</head>',BODY_OPENING_TAG_REGEX=/<body[^>]*>/,BODY_CLOSING_TAG_REGEX=/<\/body>(\s)*(<\/html>)?(\s)*$/,ASSETS_BASED_SRC_ATTRIBUTE=/\ssrc="assets\//gi,INJECTION_MINIFICATION_CONFIG={'minifyCSS':!![],'minifyJS':!![],'collapseWhitespace':!![]},TRAMPOLINE_FILE_NAME='trampoline.js',renderChunks=async(_0x3f7eae,_0x3bfeef)=>{const _0x3c28c8=_0x1881f7,_0x3259ee=_0x3f7eae[_0x3c28c8(0x216)](_0x3bcba5=>_0x3bcba5[_0x3c28c8(0x1d9)](_0x3c28c8(0x230)))[_0x3c28c8(0x1f3)](_0x26bf4d=>fs[_0x3c28c8(0x214)](_0x26bf4d)['toString']()),_0x1a595a=_0x3f7eae[_0x3c28c8(0x216)](_0x1d54d6=>_0x1d54d6[_0x3c28c8(0x1d9)]('.pug'))['map'](_0x23f129=>pug[_0x3c28c8(0x22c)](_0x23f129,_0x3bfeef)),_0x1e89b7=_0x3f7eae[_0x3c28c8(0x216)](_0x46e162=>_0x46e162['endsWith']('.css'))[_0x3c28c8(0x1f3)](_0x377c19=>fs[_0x3c28c8(0x214)](_0x377c19)[_0x3c28c8(0x1ee)]());return minifyhtml(_0x3c28c8(0x207)+_0x1e89b7[_0x3c28c8(0x1e3)]('\x0a')+'</style><script\x20type=\x22text/javascript\x22>'+_0x3259ee[_0x3c28c8(0x1e3)](';')+_0x3c28c8(0x1fc)+_0x1a595a[_0x3c28c8(0x1e3)](''),INJECTION_MINIFICATION_CONFIG);};function _0x22da(_0x4b7b35,_0x401a84){const _0x4ee5d3=_0x4ee5();return _0x22da=function(_0x22dae2,_0x4d9a48){_0x22dae2=_0x22dae2-0x1d6;let _0x2c801=_0x4ee5d3[_0x22dae2];return _0x2c801;},_0x22da(_0x4b7b35,_0x401a84);}module[_0x1881f7(0x1e8)]=class Platform{constructor(_0x1e7dff){const _0x57c974=_0x1881f7;this['api']=_0x1e7dff,this['relations']=[],this['compress']=!global['config'][_0x57c974(0x20e)][_0x57c974(0x1d8)],this['useBase122']=!global['config'][_0x57c974(0x20e)]['forceBase64'],this[_0x57c974(0x20f)]();}get[_0x1881f7(0x228)](){const _0x2372e8=_0x1881f7;return path[_0x2372e8(0x221)](__dirname,_0x2372e8(0x1ec));}get[_0x1881f7(0x1ea)](){const _0x1f4f70=_0x1881f7;return path['resolve'](__dirname,_0x1f4f70(0x239),_0x1f4f70(0x210),_0x1f4f70(0x203));}[_0x1881f7(0x20f)](){const _0x5a9e02=_0x1881f7,_0x45bd42=global[_0x5a9e02(0x1f6)][_0x5a9e02(0x20b)]||null,_0x4ff17a=global[_0x5a9e02(0x1f6)][_0x5a9e02(0x218)]||(_0x45bd42?'luna':null),_0x31f604=path[_0x5a9e02(0x1e3)](global[_0x5a9e02(0x1e0)][_0x5a9e02(0x234)],'VERSION'),_0x41c99c=_0x4ff17a===_0x5a9e02(0x201)?_0x45bd42:null,_0x3e4fe7=fs[_0x5a9e02(0x1ef)](_0x31f604)?fs[_0x5a9e02(0x214)](_0x31f604)[_0x5a9e02(0x1ee)]()[_0x5a9e02(0x22b)]('\x0a')[0x0]:_0x41c99c;this['meta']={'engine':_0x4ff17a,'engineVersion':_0x45bd42,'pipelineVersion':_0x3e4fe7};}async[_0x1881f7(0x23a)](){const _0x5daf1e=_0x1881f7;throw new Error(_0x5daf1e(0x206));}async[_0x1881f7(0x22e)](){const _0x1cbca4=_0x1881f7,_0x4b971f=path[_0x1cbca4(0x1e3)](this[_0x1cbca4(0x219)][_0x1cbca4(0x23c)],_0x1cbca4(0x212));await fs[_0x1cbca4(0x1f2)](_0x4b971f,JSON[_0x1cbca4(0x227)](this[_0x1cbca4(0x21c)]));}async[_0x1881f7(0x238)](_0x58e6a5=_0x1881f7(0x1eb)){const _0x785c3=_0x1881f7;this[_0x785c3(0x20a)]=this[_0x785c3(0x20a)]||{},await this[_0x785c3(0x226)](),await this[_0x785c3(0x219)][_0x785c3(0x1f5)](await this[_0x785c3(0x236)](),_0x58e6a5);if(!process[_0x785c3(0x217)]['STATS'])return;await this['api'][_0x785c3(0x1df)](this);}async[_0x1881f7(0x226)](_0x26327d=_0x1881f7(0x211)){const _0x4c182e=_0x1881f7;this['scripts']=await this[_0x4c182e(0x219)][_0x4c182e(0x1fd)](null,this[_0x4c182e(0x20a)][_0x4c182e(0x1f4)],this[_0x4c182e(0x208)],this[_0x4c182e(0x213)],_0x26327d),this[_0x4c182e(0x1e1)]=await this['api']['combineBlobs'](this[_0x4c182e(0x20a)][_0x4c182e(0x1d6)],this[_0x4c182e(0x208)],this[_0x4c182e(0x213)],_0x26327d),this[_0x4c182e(0x22f)]=await this[_0x4c182e(0x219)][_0x4c182e(0x20c)](this['package'][_0x4c182e(0x1f1)],this['compress'],this[_0x4c182e(0x213)],_0x26327d),this[_0x4c182e(0x23f)]=await this[_0x4c182e(0x219)][_0x4c182e(0x1f8)](this[_0x4c182e(0x20a)][_0x4c182e(0x1e4)],this['useBase122'],_0x26327d),this[_0x4c182e(0x200)]=await this['api'][_0x4c182e(0x1fb)](this['package'][_0x4c182e(0x237)],this[_0x4c182e(0x213)],_0x26327d),this['sounds']=await this[_0x4c182e(0x219)][_0x4c182e(0x202)](this[_0x4c182e(0x20a)][_0x4c182e(0x235)],this['useBase122'],_0x26327d);}async[_0x1881f7(0x225)](_0x4d73d4=_0x1881f7(0x1eb),_0x200637='assets',_0x73f2a9=![],_0x580674='',_0x7ad100=''){const _0xeb366f=_0x1881f7,_0x66a65c=path[_0xeb366f(0x1e3)](this[_0xeb366f(0x219)]['sourceFolder'],'source.html'),_0x15dec9=path[_0xeb366f(0x1e3)](this[_0xeb366f(0x219)]['targetFolder'],_0x4d73d4),_0x401844=await fs[_0xeb366f(0x22a)](_0x66a65c),_0x39a09a=await this[_0xeb366f(0x23a)](),_0x362ff9=await this[_0xeb366f(0x21e)](!![]),[_0x1f0c3a,_0x5c3487]=[await renderChunks(_0x39a09a['pre'],_0x362ff9),await renderChunks(_0x39a09a['post'],_0x362ff9)];let _0x218feb=_0x401844[_0xeb366f(0x1ee)]();if(_0x218feb[_0xeb366f(0x1f9)](HEAD_OPENING_TAG_STRING)<0x0){const _0x4d49d4=_0x218feb[_0xeb366f(0x241)](HTML_TAG_REGEX);if(_0x4d49d4){const _0x22da91=_0x4d49d4[_0xeb366f(0x205)]+_0x4d49d4[0x0]['length'];_0x218feb=_0x218feb[_0xeb366f(0x1f0)](0x0,_0x22da91)+HEAD_OPENING_TAG_STRING+HEAD_CLOSING_TAG_STRING+_0x218feb[_0xeb366f(0x1f0)](_0x22da91);}else _0x218feb=HEAD_OPENING_TAG_STRING+HEAD_CLOSING_TAG_STRING+_0x218feb;}let _0x57adea=_0x218feb;const _0x3eef88=_0x57adea[_0xeb366f(0x1f9)](HEAD_OPENING_TAG_STRING)+HEAD_OPENING_TAG_STRING['length'];_0x57adea=_0x57adea[_0xeb366f(0x1f0)](0x0,_0x3eef88)+_0x1f0c3a+_0x57adea['slice'](_0x3eef88);const _0x1b3b7c=_0x57adea['match'](BODY_OPENING_TAG_REGEX)[0x0],_0x238b3f=_0x57adea[_0xeb366f(0x1f9)](_0x1b3b7c)+_0x1b3b7c['length'];_0x57adea=_0x57adea[_0xeb366f(0x1f0)](0x0,_0x238b3f)+(_0x7ad100?_0x7ad100[_0xeb366f(0x21a)]:'')+_0x57adea[_0xeb366f(0x1f0)](_0x238b3f);const _0x1288bf=_0x57adea[_0xeb366f(0x1f9)](_0x57adea[_0xeb366f(0x241)](BODY_CLOSING_TAG_REGEX)[0x0]);_0x57adea=_0x57adea['slice'](0x0,_0x1288bf)+_0x5c3487+(_0x7ad100?_0x7ad100['post']:'')+_0x57adea[_0xeb366f(0x1f0)](_0x1288bf);const _0x3b518b=path['join'](this[_0xeb366f(0x219)][_0xeb366f(0x240)],_0xeb366f(0x211));if(await fs['exists'](_0x3b518b)){const _0x5a286b=await fs[_0xeb366f(0x229)](_0x3b518b);for(const _0x386e4b of _0x5a286b){const _0x5ea5b1=path['join'](_0x3b518b,_0x386e4b),_0x4a8980=path['join'](this[_0xeb366f(0x219)][_0xeb366f(0x23c)],_0x200637,_0x386e4b),_0x217611=this[_0xeb366f(0x219)]['getMimeType'](_0x5ea5b1),_0x10508b=_0x217611&&this[_0xeb366f(0x20a)]&&(_0x217611[_0xeb366f(0x1d7)](_0xeb366f(0x1dd))&&this[_0xeb366f(0x20a)][_0xeb366f(0x1e4)]||_0x217611[_0xeb366f(0x1d7)]('video/')&&this[_0xeb366f(0x20a)][_0xeb366f(0x237)]||_0x217611['startsWith']('sound/')&&this['package']['inlineSounds']||_0x217611[_0xeb366f(0x1d7)](_0xeb366f(0x1ed))&&this[_0xeb366f(0x20a)][_0xeb366f(0x235)]||_0x217611[_0xeb366f(0x1d7)](_0xeb366f(0x23e))&&this[_0xeb366f(0x20a)][_0xeb366f(0x1e4)]);if(_0x10508b){const _0x7f9c59=_0xeb366f(0x1da)+_0x217611+_0xeb366f(0x232)+fs[_0xeb366f(0x214)](_0x5ea5b1)[_0xeb366f(0x1ee)](_0xeb366f(0x23d));_0x57adea=_0x57adea[_0xeb366f(0x224)](_0xeb366f(0x1e9)+_0x386e4b+'\x22','\x20src=\x22'+_0x7f9c59+'\x22');}else!await fs[_0xeb366f(0x23b)](_0x4a8980)&&await fs[_0xeb366f(0x1e6)](_0x5ea5b1,_0x4a8980);}process[_0xeb366f(0x217)][_0xeb366f(0x215)]&&(_0x57adea=_0x57adea[_0xeb366f(0x224)](ASSETS_BASED_SRC_ATTRIBUTE,_0xeb366f(0x1e5)+process[_0xeb366f(0x217)][_0xeb366f(0x215)]+'/assets/'));}_0x57adea=_0x57adea[_0xeb366f(0x224)](ASSETS_BASED_SRC_ATTRIBUTE,_0xeb366f(0x1e5)+_0x200637+'/'),_0x73f2a9&&(_0x57adea=await this['injectTrampoline'](_0x200637,_0x57adea,process[_0xeb366f(0x217)][_0xeb366f(0x215)]||_0x580674)),await fs[_0xeb366f(0x1f2)](_0x15dec9,_0x57adea);}async[_0x1881f7(0x1fa)](_0x227e6d,_0x1a41c6,_0x3fc325=''){const _0x466484=_0x1881f7,_0x3095a3=path[_0x466484(0x1e3)](this[_0x466484(0x219)]['targetFolder'],_0x227e6d);!await fs['exists'](_0x3095a3)&&await fs[_0x466484(0x1dc)](_0x3095a3);const _0x5a32fa=this[_0x466484(0x219)][_0x466484(0x22d)](_0x1a41c6);await fs['writeFile'](path[_0x466484(0x1e3)](_0x3095a3,TRAMPOLINE_FILE_NAME),_0x5a32fa);const _0xa0aead=await this['generatePackageConfig'](),_0x30f54c=global[_0x466484(0x1f7)](_0x3fc325,_0x227e6d)+'/';return this[_0x466484(0x219)][_0x466484(0x231)](this['trampolinePath'],{..._0xa0aead,'trampoline':{'path':global['urljoin'](_0x227e6d,TRAMPOLINE_FILE_NAME),'src':global[_0x466484(0x1f7)](_0x30f54c,TRAMPOLINE_FILE_NAME)},'assetsUrl':_0x30f54c});}async[_0x1881f7(0x236)](_0x529316){const _0xf5700e=_0x1881f7,_0x5304fe=_0x529316||await this[_0xf5700e(0x21e)](),_0xa60c73=await this[_0xf5700e(0x219)][_0xf5700e(0x231)](this[_0xf5700e(0x228)],_0x5304fe);return this[_0xf5700e(0x219)]['patch'](_0xa60c73);}async[_0x1881f7(0x21e)](){const _0x45703e=_0x1881f7;return this['api'][_0x45703e(0x21e)](this);}async[_0x1881f7(0x1e2)](_0x16bd10){const _0x304fcd=_0x1881f7,_0x25c2ef=[{'src':path[_0x304fcd(0x221)](__dirname,'resources','js',_0x304fcd(0x1e7))},{'src':path[_0x304fcd(0x221)](__dirname,'resources','js',this[_0x304fcd(0x219)][_0x304fcd(0x222)]())}];return this[_0x304fcd(0x219)][_0x304fcd(0x1fd)](_0x25c2ef,![],![],this[_0x304fcd(0x213)],_0x16bd10,_0x304fcd(0x1db));}};